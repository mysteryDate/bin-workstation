# !/bin/bash
declare -a TEST_FOLDERS=(
    http/tests/canvas
    svg/canvas
    fast/canvas
    external/wpt/offscreen-canvas
    external/wpt/2dcontext
    virtual/gpu/fast/canvas
    virtual/disable-deferred-rendering/fast/canvas
    virtual/threaded/fast/idleToBlob
    virtual/threaded/external/wpt/offscreen-canvas
  )

cd ~/chrome/src
for i in "${TEST_FOLDERS[@]}"; do
  third_party/blink/tools/run_web_tests.py $i -q --no-show-results
  printf "^ $i\n------------------------------------\n\n"
done

printf " ---------- running webgl_conformance tests --------\n"
content/test/gpu/run_gpu_integration_test.py webgl_conformance --test-filter *anvas*
printf "^ $i\n------------------------------------\n\n"

printf " ---------- running pixel tests --------\n"
xvfb-run -s "-screen 0 1024x768x24" \
  content/test/gpu/run_gpu_integration_test.py pixel --local-run \
  --passthrough --no-skia-gold-failure --test-filter *anvas*
printf "^ $i\n------------------------------------\n\n"
